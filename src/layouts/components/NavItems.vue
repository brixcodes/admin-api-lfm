<script lang="ts" setup>
import { useAuth } from '@/utils/auth'
import VerticalNavLink from '@layouts/components/VerticalNavLink.vue'
import { useRouter } from 'vue-router'

const { logout } = useAuth()
const router = useRouter()

// Fonction de d√©connexion
const handleLogout = async () => {
  try {
    await logout()
    router.push('/login')
  } catch (error) {
    console.error('Erreur lors de la d√©connexion:', error)
    // Redirection forc√©e vers la page de connexion
    router.push('/login')
  }
}
</script>

<template>
  <!-- üëâ Tableau de bord -->
  <VerticalNavLink :item="{ title: $t('nav.dashboard'), icon: 'ri-dashboard-line', to: '/dashboard' }" />

  <!-- üëâ Profil -->
  <VerticalNavLink :item="{ title: $t('nav.profile'), icon: 'ri-user-settings-line', to: '/profil' }" />

  <!-- üëâ Utilisateurs -->
  <VerticalNavLink :item="{ title: $t('nav.users'), icon: 'ri-user-3-line', to: '/system' }" />

  <!-- üëâ Formations -->
  <VerticalNavLink :item="{ title: $t('nav.trainings'), icon: 'ri-book-open-line', to: '/formations' }" />

  <!-- üëâ Gestion -->
  <VerticalNavLink :item="{ title: $t('nav.management'), icon: 'ri-briefcase-3-line', to: '/gestion' }" />

  <!-- üëâ Projets -->
  <VerticalNavLink :item="{ title: $t('nav.projects'), icon: 'ri-team-line', to: '/projets' }" />


  <!-- üëâ Fichiers -->
  <VerticalNavLink :item="{ title: $t('nav.files'), icon: 'ri-folder-3-line', to: '/fichiers' }" />

  <!-- üëâ Informations -->
  <VerticalNavLink :item="{ title: $t('nav.infos'), icon: 'ri-megaphone-line', to: '/infos' }" />

  <!-- üëâ D√©connexion -->
  <VerticalNavLink :item="{ title: 'D√©connexion', icon: 'ri-logout-box-r-line', }" @click="handleLogout" />
</template>
