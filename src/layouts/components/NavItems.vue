<script lang="ts" setup>
import VerticalNavSectionTitle from '@/@layouts/components/VerticalNavSectionTitle.vue'
import VerticalNavGroup from '@layouts/components/VerticalNavGroup.vue'
import VerticalNavLink from '@layouts/components/VerticalNavLink.vue'
import { useAuth } from '@/utils/auth'
import { useRouter } from 'vue-router'

const { logout } = useAuth()
const router = useRouter()

// Fonction de d√©connexion
const handleLogout = async () => {
  try {
    await logout()
    router.push('/login')
  } catch (error) {
    console.error('Erreur lors de la d√©connexion:', error)
    // Redirection forc√©e vers la page de connexion
    router.push('/login')
  }
}
</script>

<template>
  <!-- üëâ Tableau de bord -->
  <VerticalNavLink
    :item="{
      title: 'Tableau de bord',
      icon: 'ri-dashboard-line',
      to: '/dashboard',
    }"
  />

  <!-- üëâ Gestion des Apprenants -->
  <VerticalNavGroup
    :item="{
      title: 'Apprenants',
      icon: 'ri-user-star-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: 'Liste compl√®te',
        to: '/apprenants',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Inscriptions',
        to: '/apprenants/inscriptions',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Parcours individuel',
        to: '/apprenants/parcours',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Chefs-d\'≈ìuvre',
        to: '/apprenants/chefs-oeuvre',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Livret de comp√©tences',
        to: '/apprenants/competences',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Accr√©ditations',
        to: '/apprenants/accreditations',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ Formation et P√©dagogie -->
  <VerticalNavGroup
    :item="{
      title: 'Formation',
      icon: 'ri-book-open-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: 'Modules de formation',
        to: '/formation/modules',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Supports p√©dagogiques',
        to: '/formation/supports',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Exercices et √©valuations',
        to: '/formation/exercices',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Suivi des apprentissages',
        to: '/formation/suivi',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ Projets P√©dagogiques -->
  <VerticalNavGroup
    :item="{
      title: 'Projets',
      icon: 'ri-folder-user-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: 'Chefs-d\'≈ìuvre individuels',
        to: '/projets/chefs-oeuvre',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Projets collectifs',
        to: '/projets/collectifs',
      }"
    />
    <VerticalNavLink
      :item="{
        title: '√âquipes de travail',
        to: '/projets/equipes',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Archives des r√©alisations',
        to: '/projets/archives',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ Interventions Sociales -->
  <VerticalNavGroup
    :item="{
      title: 'Interventions',
      icon: 'ri-heart-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: 'Stages en milieu carc√©ral',
        to: '/interventions/stages',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Missions humanitaires',
        to: '/interventions/humanitaires',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Partenaires associatifs',
        to: '/interventions/partenaires',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Rapports d\'intervention',
        to: '/interventions/rapports',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Cartographie des actions',
        to: '/interventions/cartographie',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ √âquipe P√©dagogique -->
  <VerticalNavGroup
    :item="{
      title: 'Formateurs',
      icon: 'ri-user-settings-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: '√âquipe p√©dagogique',
        to: '/formateurs',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Planning des interventions',
        to: '/formateurs/planning',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Suivi d\'activit√©',
        to: '/formateurs/activite',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Communication interne',
        to: '/formateurs/communication',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ Administration -->
  <VerticalNavGroup
    :item="{
      title: 'Administration',
      icon: 'ri-file-list-3-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: 'Dossiers administratifs',
        to: '/admin/dossiers',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Documents officiels',
        to: '/admin/documents',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Gestion des absences',
        to: '/admin/absences',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Discipline et sanctions',
        to: '/admin/discipline',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ Gestion Financi√®re -->
  <VerticalNavGroup
    :item="{
      title: 'Finances',
      icon: 'ri-bank-card-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: 'Gestion des paiements',
        to: '/finances/paiements',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Forfaits de formation',
        to: '/finances/forfaits',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Sessions pr√©sentiel',
        to: '/finances/presentiel',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Logistique et transport',
        to: '/finances/logistique',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ Syst√®me -->
  <VerticalNavGroup
    :item="{
      title: 'Syst√®me',
      icon: 'ri-settings-3-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: 'Gestion des utilisateurs',
        to: '/system/utilisateurs',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'R√¥les et permissions',
        to: '/system/roles',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'S√©curit√© et audit',
        to: '/system/securite',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Journal d\'activit√©',
        to: '/system/journal',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ Communication -->
  <VerticalNavGroup
    :item="{
      title: 'Communication',
      icon: 'ri-message-3-line',
    }"
  >
    <VerticalNavLink
      :item="{
        title: 'Site web institutionnel',
        to: '/communication/site',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Blog et actualit√©s',
        to: '/communication/blog',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'M√©dias et ressources',
        to: '/communication/medias',
      }"
    />
    <VerticalNavLink
      :item="{
        title: 'Notifications',
        to: '/communication/notifications',
      }"
    />
  </VerticalNavGroup>

  <!-- üëâ Documentation -->
  <VerticalNavLink
    :item="{
      title: 'Documentation',
      icon: 'ri-article-line',
      to: '/documentation',
    }"
  />

  <!-- üëâ D√©connexion -->
  <VerticalNavLink
    :item="{
      title: 'D√©connexion',
      icon: 'ri-logout-box-r-line',
      to: '#',
    }"
    @click="handleLogout"
  />

</template>
