<script lang="ts" setup>
import { useAuth } from '@/utils/auth'
import VerticalNavLink from '@layouts/components/VerticalNavLink.vue'
import { useRouter } from 'vue-router'

const { logout } = useAuth()
const router = useRouter()

// Fonction de d√©connexion
const handleLogout = async () => {
  try {
    await logout()
    router.push('/login')
  } catch (error) {
    console.error('Erreur lors de la d√©connexion:', error)
    // Redirection forc√©e vers la page de connexion
    router.push('/login')
  }
}
</script>

<template>
  <!-- üëâ Tableau de bord -->
  <VerticalNavLink :item="{ title: 'Tableau de bord', icon: 'ri-dashboard-line', to: '/dashboard' }" />

  <!-- üëâ Utilisateurs -->
  <VerticalNavLink :item="{ title: 'Utilisateurs', icon: 'ri-user-3-line', to: '/system' }" />

  <!-- üëâ Formations -->
  <VerticalNavLink :item="{ title: 'Formations', icon: 'ri-book-open-line', to: '/formations' }" />

  <!-- üëâ Inscriptions & Paiements -->
  <VerticalNavLink :item="{ title: 'Inscriptions & Paiements', icon: 'ri-bill-line', to: '/gestion' }" />

  <!-- üëâ Projets -->
  <VerticalNavLink :item="{ title: 'Projets', icon: 'ri-team-line', to: '/projets' }" />

  <!-- üëâ G√©n√©tique -->
  <VerticalNavLink :item="{ title: 'G√©n√©tique', icon: 'ri-service-line', to: '/genetique' }" />

  <!-- üëâ Fichiers -->
  <VerticalNavLink :item="{ title: 'Fichiers', icon: 'ri-folder-3-line', to: '/fichiers' }" />

  <!-- üëâ Informations -->
  <VerticalNavLink :item="{ title: 'Informations', icon: 'ri-megaphone-line', to: '/infos' }" />

  <!-- üëâ D√©connexion -->
  <VerticalNavLink :item="{ title: 'D√©connexion', icon: 'ri-logout-box-r-line', }" @click="handleLogout" />
</template>
